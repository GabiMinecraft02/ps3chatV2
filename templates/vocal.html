<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Ps3ChatV2.0 - Vocal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<h1>Ps3ChatV2.0 - Vocal</h1>
<p>Connecté en tant que : {{ username }} | <a href="/logout">Déconnexion</a></p>

<div class="container">
    <!-- Utilisateurs connectés -->
    <section class="users-column">
        <h3>Connectés</h3>
        <ul id="users-list"></ul>
    </section>

    <!-- Zone micro / audio -->
    <div class="chat-column">
        <label for="micSelect">Choisir un micro :</label>
        <select id="micSelect"></select>

        <div style="margin-top:10px; display:flex; gap:10px;">
            <button id="mute-btn">Mute</button>
            <button id="mic-Btn">Activer / Désactiver micro</button>
            <a href="/chat"><button>Quitter le vocal</button></a>
        </div>

        <!-- Mini Chat dans vocal -->
        <div id="mini-chat" style="margin-top:20px;">
    <h4>Derniers messages</h4>
    <!-- On utilise les mêmes IDs que chat.js pour que ça fonctionne -->
    <div id="chat-box" style="height:150px; overflow-y:scroll; border:1px solid #555; padding:5px; background-color:#222; color:#fff;"></div>
    <form id="chat-form" style="display:flex; gap:5px; margin-top:5px;">
        <input type="text" id="chat-input" placeholder="Message..." style="flex:1; padding:5px; background-color:#333; color:#fff; border-radius:3px; border:1px solid #555;">
        <button type="submit" style="padding:5px 10px;">Envoyer</button>
    </form>
    </div>

        <div id="peers"></div>
        <audio id="localAudio" autoplay muted style="margin-top:10px;"></audio>
    </div>
</div>

<script>
    const USERNAME = "{{ username }}";
</script>
<script src="https://unpkg.com/simple-peer/simplepeer.min.js"></script>
<script src="{{ url_for('static', filename='js/vocal.js') }}"></script>
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>
